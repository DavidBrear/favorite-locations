{% extends 'layout.html' %}

{% block content %}
<script type="text/javascript">
function set_openid(openid, pr)
{
    u = openid.search('<username>')
    if (u != -1) {
        // openid requires username
        user = prompt('Enter your ' + pr + ' username:')
        openid = openid.substr(0, u) + user
    }
    form = document.forms['login'];
    form.elements['openid'].value = openid
}
</script>
<h1>Sign In</h1>
<form action="" method="post" name="login">
    {{form.hidden_tag()}}
    <!-- Nav tabs -->
    <ul class="nav nav-tabs nav-justified">
      <li class="active"><a href="#openid" data-toggle="tab">Using OpenId</a></li>
      <li><a href="#email" data-toggle="tab">Using Email</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
      <div class="tab-pane fade in active" id="openid">
        <h3>Using OpenID</h3>
        <p>
            Please enter your OpenID, or select one of the providers below:<br>
            {{form.openid(class='form-control')}}
            {% for error in form.errors.openid %}
            <span style="color: red;">[{{error}}]</span>
            {% endfor %}<br>
            |{% for pr in providers %}
            <a href="javascript:set_openid('{{pr.url}}', '{{pr.name}}');">{{pr.name}}</a> |
            {% endfor %}
        </p>
      </div>
      <div class="tab-pane fade" id="email">
        <h3>Using Email</h3>
        Please enter your email and password credentials below:<br>
        <div class='form-group'>
          {{form.email(class='form-control', placeholder='Email')}}
          {% for error in form.errors.email %}
            <div class='alert alert-danger'>{{error}}</div>
          {% endfor %}
        </div>
        <div class='form-group'>
          {{form.password(class='form-control', placeholder='Password')}}
          {% for error in form.errors.password %}
            <div class='alert alert-danger'>{{error}}</div>
          {% endfor%}
        </div>
      </div>
    </div>
    <label>
      {{form.remember_me}} Remember Me
    </label>
    <p><input type="submit" class='btn btn-default' value="Sign In"> or <a href='{{url_for("register")}}'>Register</a></p>
</form>
{% endblock %}
